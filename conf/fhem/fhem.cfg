attr global userattr DbLogExclude DbLogInclude DbLogValueFn:textField-long cmdIcon devStateIcon devStateIcon:textField-long devStateStyle genericDeviceType:security,ignore,switch,outlet,light,blind,thermometer,thermostat,contact,garage,window,lock homebridgeMapping:textField-long icon siriName sortby webCmd webCmdLabel:textField-long widgetOverride
attr global autoload_undefined_devices 1
attr global autosave 0
attr global holiday2we NW_Feiertag
attr global logfile ./log/fhem-%Y-%m.log
attr global modpath .
attr global motd none
attr global room System
attr global showInternalValues 1
attr global statefile ./log/fhem.save
attr global updateInBackground 1
attr global verbose 3

define telnetPort telnet 7072 global
setuuid telnetPort 5c63389a-f33f-47a6-6006-4a23a79997bb3bfa
attr telnetPort room System

define WEB FHEMWEB 8083 global
setuuid WEB 5c63389a-f33f-47a6-81b9-bb9ae0687a6361b8
attr WEB JavaScripts codemirror/fhem_codemirror.js
attr WEB editConfig 1
attr WEB iconPath fhemSVG:openautomation:default
attr WEB longpoll websocket
attr WEB plotfork 1
attr WEB room System
attr WEB stylesheetPrefix f18

define Systembefehle weblink cmdList Restart:Restart-Fhem:shutdown+restart Update:Update-Check:update+check Update:Update-Now:update Shutdown:Shutdown-Fhem:shutdown
setuuid Systembefehle 5c63389a-f33f-47a6-852b-b9cc277a14848342
attr Systembefehle room System

define WEBphone FHEMWEB 8084 global
setuuid WEBphone 5c63389a-f33f-47a6-41a8-f1c9babd1774e218
attr WEBphone JavaScripts codemirror/fhem_codemirror.js
attr WEBphone room System
attr WEBphone stylesheetPrefix smallscreen

define WEBtablet FHEMWEB 8085 global
setuuid WEBtablet 5c63389a-f33f-47a6-b66e-32d8c56800222a74
attr WEBtablet JavaScripts codemirror/fhem_codemirror.js
attr WEBtablet room System
attr WEBtablet stylesheetPrefix touchpad

# Fake FileLog entry, to access the fhem log from FHEMWEB 
define Logfile FileLog ./log/fhem-%Y-%m.log fakelog
setuuid Logfile 5c63389a-f33f-47a6-a5e0-9620b9fca2418a52
attr Logfile room System

define autocreate autocreate
setuuid autocreate 5c63389a-f33f-47a6-e3c0-3d1839cf94c3d7d9
attr autocreate room System

define eventTypes eventTypes ./log/eventTypes.txt
setuuid eventTypes 5c63389a-f33f-47a6-0ce1-bb594e2d03416feb
attr eventTypes room System

# Disable this to avoid looking for new USB devices on startup
define initialUsbCheck notify global:INITIALIZED usb create
setuuid initialUsbCheck 5c63389a-f33f-47a6-cf94-13923b43a24ce4fe
attr initialUsbCheck room System

define logdb DbLog ./db.conf .*:.*
setuuid logdb 5c63389b-f33f-47a6-3c23-7854f3b462ac92cd
attr logdb DbLogSelectionMode Include
attr logdb DbLogType Current/History
attr logdb room Plots,System

define Rep.LogDB.sqlResult DbRep logdb
setuuid Rep.LogDB.sqlResult 5dac3f69-f33f-d8e9-1923-54b486d42ec7bb58
attr Rep.LogDB.sqlResult aggregation no
attr Rep.LogDB.sqlResult comment Device zum freien Report mit sqlCmd.\
- Auswahl von Statements -\
\
Device/Reading-Kombinationen in der Datenbank:\
select device, reading, count(*) from history group by DEVICE, READING\
\
geloggte Devices in der Datenbank:\
select device, count(*) from history group by DEVICE\

attr Rep.LogDB.sqlResult devStateIcon connected:10px-kreis-gelb .*disconnect:10px-kreis-rot .*done:10px-kreis-gruen
attr Rep.LogDB.sqlResult disable 0
attr Rep.LogDB.sqlResult event-on-update-reading state
attr Rep.LogDB.sqlResult group Datenbankauswertungen
attr Rep.LogDB.sqlResult room System
attr Rep.LogDB.sqlResult showproctime 1
attr Rep.LogDB.sqlResult sqlResultFormat table
attr Rep.LogDB.sqlResult stateFormat { if (defined($defs{$name}{READINGS}{SqlResult})) {\
   ReadingsVal($name,"SqlResult",undef);;\
  } else {\
   ReadingsVal($name,"state",undef);;\
  } \
}
attr Rep.LogDB.sqlResult timeout 1000
attr Rep.LogDB.sqlResult verbose 2

define sysstat SYSSTAT
setuuid sysstat 5c63389b-f33f-47a6-34d3-1ba0d9a3986c4255
attr sysstat DbLogInclude /,/boot,cpufreq,load,temperature
attr sysstat filesystems /dev/root,/dev/mmcblk0p1
attr sysstat group Raspberry Pi Systemstatus
attr sysstat raspberrycpufreq 1
attr sysstat raspberrytemperature 2
attr sysstat room System
attr sysstat showpercent 1

define Stromzaehler OBIS /dev/lesekopf@9600,7,E,1 SML
setuuid Stromzaehler 5c63389b-f33f-47a6-4250-3173f54cdaf79b52
attr Stromzaehler DbLogInclude power,total_consumption
attr Stromzaehler event-min-interval total_consumption:60
attr Stromzaehler interval 5
attr Stromzaehler pollingMode on
attr Stromzaehler room Zaehler

define myPlot_Stromverbrauch SVG logdb:myPlot_Stromverbrauch:HISTORY
setuuid myPlot_Stromverbrauch 5c63389b-f33f-47a6-cf75-5e1c1f04f64aaacc
attr myPlot_Stromverbrauch room Plots,Zaehler

define myPlot_Systemlast SVG logdb:myPlot_Systemlast:HISTORY
setuuid myPlot_Systemlast 5dac2bf3-f33f-d8e9-35bb-68258cb7d129915f
attr myPlot_Systemlast room Plots

define myPlot_Temperatur SVG logdb:myPlot_Temperatur:HISTORY
setuuid myPlot_Temperatur 5dac3225-f33f-d8e9-80f2-46b662125fa8b8cb
attr myPlot_Temperatur room Plots


define Hue HUEBridge 192.168.2.49
setuuid Hue 5c63389d-f33f-47a6-826c-a3e75d1714a8425c
attr Hue httpUtils 1
attr Hue icon hue_filled_bridge_v1
attr Hue key BE02L6dVz4VYYlYIxhKCzBQ0clGELPa72WptZYHf
attr Hue room Hue

define HUEDevice7 HUEDevice 7  IODev=Hue
setuuid HUEDevice7 5c63389d-f33f-47a6-db43-b4f8b9607c6c450c
attr HUEDevice7 IODev Hue
attr HUEDevice7 alias Wohnzimmer 2
attr HUEDevice7 color-icons 2
attr HUEDevice7 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEDevice7 icon hue_filled_white_and_color_e27_b22
attr HUEDevice7 model LCT001
attr HUEDevice7 room Hue
attr HUEDevice7 subType extcolordimmer
attr HUEDevice7 webCmd rgb:rgb ff0000:rgb DEFF26:rgb 0000ff:ct 490:ct 380:ct 270:ct 160:toggle:on:off

define HUEDevice8 HUEDevice 8  IODev=Hue
setuuid HUEDevice8 5c63389d-f33f-47a6-7347-19c61d9d4b1a011b
attr HUEDevice8 IODev Hue
attr HUEDevice8 alias Wohnzimmer 3
attr HUEDevice8 color-icons 2
attr HUEDevice8 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEDevice8 icon hue_filled_white_and_color_e27_b22
attr HUEDevice8 model LCT001
attr HUEDevice8 room Hue
attr HUEDevice8 subType extcolordimmer
attr HUEDevice8 webCmd rgb:rgb ff0000:rgb DEFF26:rgb 0000ff:ct 490:ct 380:ct 270:ct 160:toggle:on:off

define HUEDevice6 HUEDevice 6  IODev=Hue
setuuid HUEDevice6 5c63389d-f33f-47a6-e9fc-4ef27ab22dc62a07
attr HUEDevice6 IODev Hue
attr HUEDevice6 alias Wohnzimmer 1
attr HUEDevice6 color-icons 2
attr HUEDevice6 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEDevice6 icon hue_filled_white_and_color_e27_b22
attr HUEDevice6 model LCT001
attr HUEDevice6 room Hue
attr HUEDevice6 subType extcolordimmer
attr HUEDevice6 webCmd rgb:rgb ff0000:rgb DEFF26:rgb 0000ff:ct 490:ct 380:ct 270:ct 160:toggle:on:off

define HUEDevice11 HUEDevice 11  IODev=Hue
setuuid HUEDevice11 5c63389d-f33f-47a6-e2a3-4997ef246dfc854c
attr HUEDevice11 IODev Hue
attr HUEDevice11 alias Marit‘s Zimmer
attr HUEDevice11 color-icons 2
attr HUEDevice11 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEDevice11 icon hue_filled_white_and_color_e27_b22
attr HUEDevice11 model LCT010
attr HUEDevice11 room Hue
attr HUEDevice11 subType extcolordimmer
attr HUEDevice11 webCmd rgb:rgb ff0000:rgb DEFF26:rgb 0000ff:ct 490:ct 380:ct 270:ct 160:toggle:on:off

define HUEDevice12 HUEDevice 12  IODev=Hue
setuuid HUEDevice12 5c63389d-f33f-47a6-b6bd-b64f0ea7c31a8c3b
attr HUEDevice12 IODev Hue
attr HUEDevice12 alias Hauke‘s Zimmer
attr HUEDevice12 color-icons 2
attr HUEDevice12 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEDevice12 icon hue_filled_white_and_color_e27_b22
attr HUEDevice12 model LCT010
attr HUEDevice12 room Hue
attr HUEDevice12 subType extcolordimmer
attr HUEDevice12 webCmd rgb:rgb ff0000:rgb DEFF26:rgb 0000ff:ct 490:ct 380:ct 270:ct 160:toggle:on:off

define HUEGroup3 HUEDevice group 3  IODev=Hue
setuuid HUEGroup3 5c63389d-f33f-47a6-5578-b118fb5acfc30b8a
attr HUEGroup3 userattr createActionReadings:1,0 createGroupReadings:1,0
attr HUEGroup3 IODev Hue
attr HUEGroup3 alias Marits Zimmer
attr HUEGroup3 color-icons 2
attr HUEGroup3 delayedUpdate 1
attr HUEGroup3 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEGroup3 group HUEGroup
attr HUEGroup3 icon hue_room_living
attr HUEGroup3 room Homekit,Hue
attr HUEGroup3 subType extcolordimmer

define HUEGroup2 HUEDevice group 2  IODev=Hue
setuuid HUEGroup2 5c63389d-f33f-47a6-0626-0c5ebc0b35477fb9
attr HUEGroup2 userattr createActionReadings:1,0 createGroupReadings:1,0
attr HUEGroup2 IODev Hue
attr HUEGroup2 alias Haukes Zimmer
attr HUEGroup2 color-icons 2
attr HUEGroup2 delayedUpdate 1
attr HUEGroup2 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEGroup2 group HUEGroup
attr HUEGroup2 icon hue_room_living
attr HUEGroup2 room Homekit,Hue
attr HUEGroup2 subType extcolordimmer

define HUEGroup1 HUEDevice group 1  IODev=Hue
setuuid HUEGroup1 5c63389d-f33f-47a6-1a62-45d004506fbe7aed
attr HUEGroup1 userattr createActionReadings:1,0 createGroupReadings:1,0
attr HUEGroup1 IODev Hue
attr HUEGroup1 alias Wohnzimmer
attr HUEGroup1 color-icons 2
attr HUEGroup1 delayedUpdate 1
attr HUEGroup1 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEGroup1 group HUEGroup
attr HUEGroup1 icon hue_room_living
attr HUEGroup1 room Hue,Homekit
attr HUEGroup1 subType extcolordimmer


define rg_stromzaehler readingsGroup TYPE=OBIS:power\
TYPE=OBIS:total_consumption
setuuid rg_stromzaehler 5c63389d-f33f-47a6-2bf5-83fb96bac44a93bd
attr rg_stromzaehler group Strom
attr rg_stromzaehler mapping {'power' => 'Aktueller Verbrauch (gesamt)', 'total_consumption' => 'Zählerstand'}
attr rg_stromzaehler noheading 1
attr rg_stromzaehler notime 1
attr rg_stromzaehler room Dashboard
attr rg_stromzaehler style style="border:0px;;background:none;;box-shadow:none"
attr rg_stromzaehler valueFormat {\
	power => "%.0fW", \
	total_consumption => "%.2fkWh"\
}
attr rg_stromzaehler valueIcon {\
	'state.on' => 'general_an',\
	'state.off' => 'general_aus@red'\
}
attr rg_stromzaehler valueStyle style="text-align:right"

define rg_systemstatus readingsGroup sysstat:temperature\
sysstat:load
setuuid rg_systemstatus 5c63389d-f33f-47a6-1722-fc5157e02a66911c
attr rg_systemstatus alias Raspberry Pi
attr rg_systemstatus group Raspberry Pi Systemstatus
attr rg_systemstatus mapping {'load' => 'Auslastung (letzte Minute)', 'temperature' => 'CPU-Temperatur'}
attr rg_systemstatus noheading 1
attr rg_systemstatus nostate 1
attr rg_systemstatus notime 1
attr rg_systemstatus room Dashboard
attr rg_systemstatus style style="border:0px;;background:none;;box-shadow:none"
attr rg_systemstatus valueFormat {load => '{sprintf("%.0f%%",$VALUE*100)}',temperature=> "%.1f°C"}
attr rg_systemstatus valueStyle style="text-align:right"

define Wetter_yr_Vorhersage weblink iframe https://www.yr.no/place/Germany/North_Rhine-Westphalia/Aachen/meteogram.png
setuuid Wetter_yr_Vorhersage 5c63389d-f33f-47a6-1495-30da2361b844d133
attr Wetter_yr_Vorhersage group Wettervorhersage
attr Wetter_yr_Vorhersage htmlattr width="100%" height="300" frameborder="0" marginheight="0" marginwidth="0"
attr Wetter_yr_Vorhersage room Wetter

define FritzBox FRITZBOX 192.168.2.1
setuuid FritzBox 5c63389d-f33f-47a6-d795-5178a94247f3148b
attr FritzBox allowTR064Command 1
attr FritzBox room FritzBox

define rp_FB_GWLAN readingsProxy FritzBox:box_guestWlan
setuuid rp_FB_GWLAN 5c63389d-f33f-47a6-b8ab-bf150c8aea41ec51
attr rp_FB_GWLAN alias Olymp Gastzugang
attr rp_FB_GWLAN devStateIcon on:ios-on-green:off off:ios-off:on
attr rp_FB_GWLAN event-on-change-reading .*
attr rp_FB_GWLAN room FritzBox
attr rp_FB_GWLAN setFn {($CMD eq "on")?"guestWlan on":"guestWlan off"}
attr rp_FB_GWLAN setList on off

define rp_FB_WLAN readingsProxy FritzBox:box_wlan_2.4GHz
setuuid rp_FB_WLAN 5c63389d-f33f-47a6-81de-d533fd78ea4d0833
attr rp_FB_WLAN alias Olymp
attr rp_FB_WLAN devStateIcon on:ios-on-green:off off:ios-off:on
attr rp_FB_WLAN event-on-change-reading .*
attr rp_FB_WLAN room FritzBox
attr rp_FB_WLAN setFn {($CMD eq "on")?"wlan on":"wlan off"}
attr rp_FB_WLAN setList on off

define rg_fritzbox readingsGroup TYPE=FRITZBOX:box_cpuTemp\
TYPE=FRITZBOX:box_powerRate\
TYPE=FRITZBOX:box_wlan_2.4GHz\
TYPE=FRITZBOX:box_guestWlan
setuuid rg_fritzbox 5c63389d-f33f-47a6-21d4-b13e4e3cdc6ac2f1
attr rg_fritzbox group FritzBox
attr rg_fritzbox mapping {'box_cpuTemp' => 'CPU-Temperatur', 'box_powerRate' => 'Aktueller Energieverbrauch:', 'box_wlan_2.4GHz' => 'WLAN', 'box_guestWlan' => 'WLAN Gastzugang'}
attr rg_fritzbox noheading 1
attr rg_fritzbox nostate 1
attr rg_fritzbox notime 1
attr rg_fritzbox room Dashboard
attr rg_fritzbox style style="border:0px;;background:none;;box-shadow:none"
attr rg_fritzbox valueFormat {box_cpuTemp => "%.1f°C", box_powerRate => "%.0f%%"}
attr rg_fritzbox valueIcon {\
	'box_wlan_2.4GHz.on' => 'ios-on-green',\
	'box_wlan_2.4GHz.off' => 'ios-off@red',\
	'box_guestWlan.on' => 'ios-on-green',\
	'box_guestWlan.off' => 'ios-off@red'\
}
attr rg_fritzbox valueStyle style="text-align:right"

define myBroker MQTT2_SERVER 1883 global
setuuid myBroker 5c63389d-f33f-47a6-5ce0-c308ac79547f778e
attr myBroker autocreate no
attr myBroker room Tasmota

define MQTT2_DVES_4B31BB MQTT2_DEVICE DVES_4B31BB
setuuid MQTT2_DVES_4B31BB 5c6b2376-f33f-47a6-c868-3c84c20e02eb6671
attr MQTT2_DVES_4B31BB IODev myBroker
attr MQTT2_DVES_4B31BB alias Bügeleisen
attr MQTT2_DVES_4B31BB autocreate 1
attr MQTT2_DVES_4B31BB event-on-change-reading .*
attr MQTT2_DVES_4B31BB readingList tele/obi-wlan1/LWT:.* LWT\
  tele/obi-wlan1/STATE:.* { json2nameValue($EVENT) }\
  tele/obi-wlan1/SENSOR:.* { json2nameValue($EVENT) }\
  tele/obi-wlan1/INFO.:.* { json2nameValue($EVENT) }\
  stat/obi-wlan1/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_4B31BB room Homekit,Tasmota
attr MQTT2_DVES_4B31BB setList off:noArg    cmnd/obi-wlan1/POWER1 0\
  on:noArg     cmnd/obi-wlan1/POWER1 1\
  toggle:noArg cmnd/obi-wlan1/POWER1 2
attr MQTT2_DVES_4B31BB setStateList on off toggle
attr MQTT2_DVES_4B31BB sortby 4
attr MQTT2_DVES_4B31BB stateFormat {my $state = lc ReadingsVal($name, "state", "off");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>"\
}
attr MQTT2_DVES_4B31BB userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_4B31BB webCmd toggle

define MQTT2_DVES_EAA928 MQTT2_DEVICE DVES_EAA928
setuuid MQTT2_DVES_EAA928 5c6b2376-f33f-47a6-03f8-9f051ecaaae9d2f4
attr MQTT2_DVES_EAA928 IODev myBroker
attr MQTT2_DVES_EAA928 alias Fernseher & Peripherie
attr MQTT2_DVES_EAA928 autocreate 1
attr MQTT2_DVES_EAA928 event-on-change-reading .*
attr MQTT2_DVES_EAA928 readingList tele/sonoff-pow1/LWT:.* LWT\
  tele/sonoff-pow1/STATE:.* { json2nameValue($EVENT) }\
  tele/sonoff-pow1/SENSOR:.* { json2nameValue($EVENT) }\
  tele/sonoff-pow1/INFO.:.* { json2nameValue($EVENT) }\
  stat/sonoff-pow1/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_EAA928 room Tasmota
attr MQTT2_DVES_EAA928 setList off:noArg    cmnd/sonoff-pow1/POWER1 0\
  on:noArg     cmnd/sonoff-pow1/POWER1 1\
  toggle:noArg cmnd/sonoff-pow1/POWER1 2
attr MQTT2_DVES_EAA928 setStateList on off toggle
attr MQTT2_DVES_EAA928 sortby 1
attr MQTT2_DVES_EAA928 stateFormat {my $state = lc ReadingsVal($name, "POWER1", "off");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
ReadingsVal($name,"ENERGY_Power",-1), \
ReadingsVal($name,"ENERGY_Today",-1)\
)\
}
attr MQTT2_DVES_EAA928 userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_EAA928 webCmd toggle

define MQTT2_DVES_14C6B8 MQTT2_DEVICE DVES_14C6B8
setuuid MQTT2_DVES_14C6B8 5c6b2377-f33f-47a6-a8d6-90150af640f17e4c
attr MQTT2_DVES_14C6B8 IODev myBroker
attr MQTT2_DVES_14C6B8 alias Computer & Peripherie
attr MQTT2_DVES_14C6B8 autocreate 1
attr MQTT2_DVES_14C6B8 event-on-change-reading .*
attr MQTT2_DVES_14C6B8 readingList tele/sonoff-pow2/LWT:.* LWT\
  tele/sonoff-pow2/STATE:.* { json2nameValue($EVENT) }\
  tele/sonoff-pow2/SENSOR:.* { json2nameValue($EVENT) }\
  tele/sonoff-pow2/INFO.:.* { json2nameValue($EVENT) }\
  stat/sonoff-pow2/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_14C6B8 room Tasmota
attr MQTT2_DVES_14C6B8 setList off:noArg    cmnd/sonoff-pow2/POWER1 0\
  on:noArg     cmnd/sonoff-pow2/POWER1 1\
  toggle:noArg cmnd/sonoff-pow2/POWER1 2
attr MQTT2_DVES_14C6B8 setStateList on off toggle
attr MQTT2_DVES_14C6B8 sortby 2
attr MQTT2_DVES_14C6B8 stateFormat {my $state = lc ReadingsVal($name, "state", "off");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
ReadingsVal($name,"ENERGY_Power",-1), \
ReadingsVal($name,"ENERGY_Today",-1)\
)\
}
attr MQTT2_DVES_14C6B8 userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_14C6B8 webCmd toggle

define DOIF.Waschmaschine DOIF ([MQTT2_DVES_A4CAD6:ENERGY_Power] > 8)\
(\
	set $SELF washState running,\
	set $SELF start_kWh {(ReadingsVal("$DEVICE","ENERGY_Total",0))}\
)\
DOELSEIF ([MQTT2_DVES_A4CAD6:ENERGY_Power] < 8)\
(\
	set $SELF washState finish,\
	set $SELF end_kWh {(ReadingsVal("$DEVICE","ENERGY_Total",0))},\
	set $SELF lastRun_timestamp {(TimeNow())},\
	set $SELF lastRun_kWh {(sprintf ('%.3f',(ReadingsVal("$SELF","end_kWh",0) - ReadingsVal("$SELF","start_kWh",0))))}\
)
setuuid DOIF.Waschmaschine 5d0a6078-f33f-47a6-19ee-bb4e8ad36efc0d8d
attr DOIF.Waschmaschine alias Status Waschmaschine
attr DOIF.Waschmaschine cmdState running|finish
attr DOIF.Waschmaschine readingList washState start_kWh end_kWh lastRun_kWh lastRun_timestamp
attr DOIF.Waschmaschine room Tasmota
attr DOIF.Waschmaschine sortby 1
attr DOIF.Waschmaschine wait 45:120

define DOIF.Trockner DOIF ([MQTT2_DVES_350EBD:ENERGY_Power] > 8)\
(\
	set $SELF washState running,\
	set $SELF start_kWh {(ReadingsVal("$DEVICE","ENERGY_Total",0))}\
)\
DOELSEIF ([MQTT2_DVES_350EBD:ENERGY_Power] < 8)\
(\
	set $SELF washState finish,\
	set $SELF end_kWh {(ReadingsVal("$DEVICE","ENERGY_Total",0))},\
	set $SELF lastRun_timestamp {(TimeNow())},\
	set $SELF lastRun_kWh {(sprintf ('%.3f',(ReadingsVal("$SELF","end_kWh",0) - ReadingsVal("$SELF","start_kWh",0))))}\
)
setuuid DOIF.Trockner 5d0a6078-f33f-47a6-ef70-0d50a532fba8dd15
attr DOIF.Trockner alias Status Trockner
attr DOIF.Trockner cmdState running|finish
attr DOIF.Trockner readingList washState start_kWh end_kWh lastRun_kWh lastRun_timestamp
attr DOIF.Trockner room Tasmota
attr DOIF.Trockner sortby 2
attr DOIF.Trockner wait 45:120

define HUEProxy1 readingsProxy HUEDevice11:state
setuuid HUEProxy1 5c6dc1c6-f33f-47a6-b2af-cf270d5cb2820328
attr HUEProxy1 alias Marit's Zimmer
attr HUEProxy1 devStateIcon on:ios-on-green:off off:ios-off:on
attr HUEProxy1 room Hue
attr HUEProxy1 valueFn {($VALUE == 1)?"on":"off"}

define HUEProxy2 readingsProxy HUEDevice12:state
setuuid HUEProxy2 5c6dc1f9-f33f-47a6-7ffb-6d9cfe1400a4fa9b
attr HUEProxy2 alias Hauke‘s Zimmer
attr HUEProxy2 devStateIcon on:ios-on-green:off off:ios-off:on
attr HUEProxy2 room Hue
attr HUEProxy2 valueFn {($VALUE == 1)?"on":"off"}

define HUESwitch1Hauke HUEDevice sensor 6 1 IODev=Hue
setuuid HUESwitch1Hauke 5c6dc61c-f33f-47a6-296c-0dd3ef72c02d21e6
attr HUESwitch1Hauke IODev Hue
attr HUESwitch1Hauke room Hue

define HUESwitch1Marit HUEDevice sensor 8 1 IODev=Hue
setuuid HUESwitch1Marit 5c6dc67f-f33f-47a6-3cd8-ffab2e3e4f967ecb
attr HUESwitch1Marit IODev Hue
attr HUESwitch1Marit room Hue

define HUE_LightGroup_Status notify .+:(pct:..+|HUEGroup1:.*|HUEGroup2:.*|HUEGroup3:.*|state:.unreachable) set Dashboard lock
setuuid HUE_LightGroup_Status 5c6dc8d6-f33f-47a6-41ef-112e7057a45abf55
attr HUE_LightGroup_Status addStateEvent 1
attr HUE_LightGroup_Status room Hue

define HUEGroup0 HUEDevice group 0  IODev=Hue
setuuid HUEGroup0 5ca8ee35-f33f-47a6-981b-c08c13be1506f205
attr HUEGroup0 userattr createActionReadings:1,0 createGroupReadings:1,0
attr HUEGroup0 IODev Hue
attr HUEGroup0 alias Alle Lampen
attr HUEGroup0 color-icons 2
attr HUEGroup0 delayedUpdate 1
attr HUEGroup0 devStateIcon {(HUEDevice_devStateIcon($name),"toggle")}
attr HUEGroup0 group HUEGroup
attr HUEGroup0 room Hue

define siri siri
setuuid siri 5cf3c327-f33f-47a6-7b29-6d0f1b730bd2e1bb
attr siri room Homekit

define atTraffic at +*00:01:00 {\
my $d= ((ReadingsVal("FritzBox",".box_TodayBytesReceivedLow",0) / (1000*1000) ) / 1000 + ( ReadingsVal("FritzBox",".box_TodayBytesReceivedHigh",0) * 4294967296 / (1000*1000) ) / 1000);;\
fhem("setreading Empfangen Empfangen $d");;\
 \
my $e= ((ReadingsVal("FritzBox",".box_TodayBytesSentLow",0) / (1000*1000) ) / 1000 + ( ReadingsVal("FritzBox",".box_TodayBytesSentHigh",0) * 4294967296 / (1000*1000) ) / 1000);;\
fhem("setreading Gesendet Gesendet $e");;\
}
setuuid atTraffic 5d46efb2-f33f-47a6-8aa6-f11611f4065b57c0
attr atTraffic room System
define Empfangen dummy
setuuid Empfangen 5d46efd4-f33f-47a6-f3a5-a8e7b1af00902ce0
attr Empfangen alias Download (Heute - Gesamt)
attr Empfangen icon control_arrow_down@green
attr Empfangen room FritzBox
attr Empfangen stateFormat {sprintf("%.2f GB - %.2f GB",ReadingsVal("Empfangen","Empfangen",0),ReadingsVal("Empfangen","Empfangen_ges",0))}
attr Empfangen userReadings Empfangen_ges monotonic { ReadingsVal("Empfangen","Empfangen",0)}
define Gesendet dummy
setuuid Gesendet 5d46efe5-f33f-47a6-3e89-b88e6870270f6cd9
attr Gesendet alias Upload (Heute - Gesamt)
attr Gesendet icon control_arrow_up@red
attr Gesendet room FritzBox
attr Gesendet stateFormat {sprintf("%.2f GB - %.2f GB",ReadingsVal("Gesendet","Gesendet",0),ReadingsVal("Gesendet","Gesendet_ges",0))}
attr Gesendet userReadings Gesendet_ges monotonic { ReadingsVal("Gesendet","Gesendet",0)}

define Sonos SONOS
setuuid Sonos 5d98889e-f33f-d8e9-57e7-1b0307739510daca
attr Sonos event-on-change-reading .*
attr Sonos room Sonos
define Sonos_Wohnzimmer_RR SONOSPLAYER RINCON_5CAAFD2E263C01400_MR
setuuid Sonos_Wohnzimmer_RR 5d9888a9-f33f-d8e9-2db9-76e34a9993414384
attr Sonos_Wohnzimmer_RR alias Wohnzimmer - Hinten Rechts
attr Sonos_Wohnzimmer_RR generateInfoSummarize1 <NormalAudio><Artist prefix="(" suffix=")"/><Title prefix=" '" suffix="'" ifempty="[Keine Musikdatei]"/><Album prefix=" vom Album '" suffix="'"/></NormalAudio> <StreamAudio><Sender suffix=":"/><SenderCurrent prefix=" '" suffix="' -"/><SenderInfo prefix=" "/></StreamAudio>
attr Sonos_Wohnzimmer_RR generateInfoSummarize2 <TransportState/><InfoSummarize1 prefix=" => "/>
attr Sonos_Wohnzimmer_RR generateInfoSummarize3 <Volume prefix="Lautstärke: "/><Mute instead=" ~ Kein Ton" ifempty=" ~ Ton An" emptyval="0"/> ~ Balance: <Balance ifempty="Mitte" emptyval="0"/><HeadphoneConnected instead=" ~ Kopfhörer aktiv" ifempty=" ~ Kein Kopfhörer" emptyval="0"/>
attr Sonos_Wohnzimmer_RR generateVolumeSlider 1
attr Sonos_Wohnzimmer_RR getAlarms 1
attr Sonos_Wohnzimmer_RR getTitleInfoFromMaster 1
attr Sonos_Wohnzimmer_RR group Wohnzimmer
attr Sonos_Wohnzimmer_RR icon icoSONOSPLAYER_icon-S1.png
attr Sonos_Wohnzimmer_RR minVolume 0
attr Sonos_Wohnzimmer_RR model Sonos_S1
attr Sonos_Wohnzimmer_RR room Sonos
attr Sonos_Wohnzimmer_RR simulateCurrentTrackPosition 1
attr Sonos_Wohnzimmer_RR sortby 1
attr Sonos_Wohnzimmer_RR stateFormat presence ~ currentTrackPositionSimulatedPercent% (currentTrackPositionSimulated / currentTrackDuration)
attr Sonos_Wohnzimmer_RR userReadings Favourites:LastActionResult.*?GetFavouritesWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Radios:LastActionResult.*?GetRadiosWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Playlists:LastActionResult.*?GetPlaylistsWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Queue:LastActionResult.*?GetQueueWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, currentTrackPosition:LastActionResult.*?GetCurrentTrackPosition.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }
attr Sonos_Wohnzimmer_RR webCmd Volume
define Sonos_Wohnzimmer_LR SONOSPLAYER RINCON_B8E937ECFF1E01400_MR
setuuid Sonos_Wohnzimmer_LR 5d9888aa-f33f-d8e9-0cbe-487c2b1409cc917d
attr Sonos_Wohnzimmer_LR alias Wohnzimmer - Hinten Links
attr Sonos_Wohnzimmer_LR generateInfoSummarize1 <NormalAudio><Artist prefix="(" suffix=")"/><Title prefix=" '" suffix="'" ifempty="[Keine Musikdatei]"/><Album prefix=" vom Album '" suffix="'"/></NormalAudio> <StreamAudio><Sender suffix=":"/><SenderCurrent prefix=" '" suffix="' -"/><SenderInfo prefix=" "/></StreamAudio>
attr Sonos_Wohnzimmer_LR generateInfoSummarize2 <TransportState/><InfoSummarize1 prefix=" => "/>
attr Sonos_Wohnzimmer_LR generateInfoSummarize3 <Volume prefix="Lautstärke: "/><Mute instead=" ~ Kein Ton" ifempty=" ~ Ton An" emptyval="0"/> ~ Balance: <Balance ifempty="Mitte" emptyval="0"/><HeadphoneConnected instead=" ~ Kopfhörer aktiv" ifempty=" ~ Kein Kopfhörer" emptyval="0"/>
attr Sonos_Wohnzimmer_LR generateVolumeSlider 1
attr Sonos_Wohnzimmer_LR getAlarms 1
attr Sonos_Wohnzimmer_LR getTitleInfoFromMaster 1
attr Sonos_Wohnzimmer_LR group Wohnzimmer
attr Sonos_Wohnzimmer_LR icon icoSONOSPLAYER_icon-S1.png
attr Sonos_Wohnzimmer_LR minVolume 0
attr Sonos_Wohnzimmer_LR model Sonos_S1
attr Sonos_Wohnzimmer_LR room Sonos
attr Sonos_Wohnzimmer_LR simulateCurrentTrackPosition 1
attr Sonos_Wohnzimmer_LR sortby 1
attr Sonos_Wohnzimmer_LR stateFormat presence ~ currentTrackPositionSimulatedPercent% (currentTrackPositionSimulated / currentTrackDuration)
attr Sonos_Wohnzimmer_LR userReadings Favourites:LastActionResult.*?GetFavouritesWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Radios:LastActionResult.*?GetRadiosWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Playlists:LastActionResult.*?GetPlaylistsWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Queue:LastActionResult.*?GetQueueWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, currentTrackPosition:LastActionResult.*?GetCurrentTrackPosition.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }
attr Sonos_Wohnzimmer_LR webCmd Volume
define Sonos_Wohnzimmer SONOSPLAYER RINCON_5CAAFDAB59C501400_MR
setuuid Sonos_Wohnzimmer 5d9888be-f33f-d8e9-f022-e3f29f691afa7f5a
attr Sonos_Wohnzimmer alias Wohnzimmer - Mitte
attr Sonos_Wohnzimmer generateInfoSummarize1 <NormalAudio><Artist prefix="(" suffix=")"/><Title prefix=" '" suffix="'" ifempty="[Keine Musikdatei]"/><Album prefix=" vom Album '" suffix="'"/></NormalAudio> <StreamAudio><Sender suffix=":"/><SenderCurrent prefix=" '" suffix="' -"/><SenderInfo prefix=" "/></StreamAudio>
attr Sonos_Wohnzimmer generateInfoSummarize2 <TransportState/><InfoSummarize1 prefix=" => "/>
attr Sonos_Wohnzimmer generateInfoSummarize3 <Volume prefix="Lautstärke: "/><Mute instead=" ~ Kein Ton" ifempty=" ~ Ton An" emptyval="0"/> ~ Balance: <Balance ifempty="Mitte" emptyval="0"/><HeadphoneConnected instead=" ~ Kopfhörer aktiv" ifempty=" ~ Kein Kopfhörer" emptyval="0"/>
attr Sonos_Wohnzimmer generateVolumeSlider 1
attr Sonos_Wohnzimmer getAlarms 1
attr Sonos_Wohnzimmer getTitleInfoFromMaster 1
attr Sonos_Wohnzimmer group Wohnzimmer
attr Sonos_Wohnzimmer icon icoSONOSPLAYER_icon-S9.png
attr Sonos_Wohnzimmer minVolume 0
attr Sonos_Wohnzimmer model Sonos_S9
attr Sonos_Wohnzimmer room Homekit,Sonos
attr Sonos_Wohnzimmer simulateCurrentTrackPosition 1
attr Sonos_Wohnzimmer sortby 1
attr Sonos_Wohnzimmer stateFormat presence ~ currentTrackPositionSimulatedPercent% (currentTrackPositionSimulated / currentTrackDuration)
attr Sonos_Wohnzimmer userReadings Favourites:LastActionResult.*?GetFavouritesWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Radios:LastActionResult.*?GetRadiosWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Playlists:LastActionResult.*?GetPlaylistsWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, Queue:LastActionResult.*?GetQueueWithCovers.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }, currentTrackPosition:LastActionResult.*?GetCurrentTrackPosition.* { if (ReadingsVal($name, "LastActionResult", "") =~ m/.*?: (.*)/) { return $1;; } }
attr Sonos_Wohnzimmer webCmd Volume
define Sonos_WohnzimmerRG_Favourites readingsGroup Sonos_Wohnzimmer:<{SONOS_getListRG($DEVICE,"Favourites",1)}@Favourites>
setuuid Sonos_WohnzimmerRG_Favourites 5d9888be-f33f-d8e9-2af9-55902c998176dc74
attr Sonos_WohnzimmerRG_Favourites room Sonos
define Sonos_WohnzimmerRG_Radios readingsGroup Sonos_Wohnzimmer:<{SONOS_getListRG($DEVICE,"Radios",1)}@Radios>
setuuid Sonos_WohnzimmerRG_Radios 5d9888be-f33f-d8e9-dd51-8f1e4a99a4c97f22
attr Sonos_WohnzimmerRG_Radios room Sonos
define Sonos_WohnzimmerRG_Playlists readingsGroup Sonos_Wohnzimmer:<{SONOS_getListRG($DEVICE,"Playlists")}@Playlists>
setuuid Sonos_WohnzimmerRG_Playlists 5d9888be-f33f-d8e9-52f0-b7c8d46b97c6a4de
attr Sonos_WohnzimmerRG_Playlists room Sonos
define Sonos_WohnzimmerRG_Queue readingsGroup Sonos_Wohnzimmer:<{SONOS_getListRG($DEVICE,"Queue")}@Queue>
setuuid Sonos_WohnzimmerRG_Queue 5d9888be-f33f-d8e9-523f-9b83e6e62b7afe53
attr Sonos_WohnzimmerRG_Queue room Sonos

define myTelegramBot TelegramBot
setuuid myTelegramBot 5d988d43-f33f-d8e9-aab6-8f5a1b30f23cdaad
attr myTelegramBot pollingTimeout 120
attr myTelegramBot room Telegram

define notify_fhem_reload notify global:INITIALIZED set myTelegramBot message fhem newly started - just now !
setuuid notify_fhem_reload 5d988f6a-f33f-d8e9-5f1d-d8f038daeeec8af4
attr notify_fhem_reload room Telegram

define MQTT2_DVES_0371A9 MQTT2_DEVICE DVES_0371A9
setuuid MQTT2_DVES_0371A9 5dc47b52-f33f-d8e9-fa1d-5ee57920d71db634
attr MQTT2_DVES_0371A9 IODev myBroker
attr MQTT2_DVES_0371A9 alias Zirkulationspumpe
attr MQTT2_DVES_0371A9 autocreate 1
attr MQTT2_DVES_0371A9 event-on-change-reading .*
attr MQTT2_DVES_0371A9 readingList tele/gosund-sp111-02/LWT:.* LWT\
  tele/gosund-sp111-02/STATE:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-02/SENSOR:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-02/INFO.:.* { json2nameValue($EVENT) }\
  stat/gosund-sp111-02/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_0371A9 room Tasmota
attr MQTT2_DVES_0371A9 setList off:noArg    cmnd/gosund-sp111-02/POWER1 0\
  on:noArg     cmnd/gosund-sp111-02/POWER1 1\
  toggle:noArg cmnd/gosund-sp111-02/POWER1 2
attr MQTT2_DVES_0371A9 setStateList on off toggle
attr MQTT2_DVES_0371A9 sortby 5
attr MQTT2_DVES_0371A9 stateFormat {my $state = lc ReadingsVal($name, "state", "off");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
ReadingsVal($name,"ENERGY_Power",-1), \
ReadingsVal($name,"ENERGY_Today",-1)\
)\
}
attr MQTT2_DVES_0371A9 userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_0371A9 webCmd toggle

define MQTT2_DVES_02F335 MQTT2_DEVICE DVES_02F335
setuuid MQTT2_DVES_02F335 5dc47b56-f33f-d8e9-f421-eaf6a57dd6885ee1
attr MQTT2_DVES_02F335 DbLogInclude ENERGY_Power
attr MQTT2_DVES_02F335 IODev myBroker
attr MQTT2_DVES_02F335 alias Synology NAS
attr MQTT2_DVES_02F335 autocreate 1
attr MQTT2_DVES_02F335 event-on-change-reading .*
attr MQTT2_DVES_02F335 readingList tele/gosund-sp111-01/LWT:.* LWT\
  tele/gosund-sp111-01/STATE:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-01/SENSOR:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-01/INFO.:.* { json2nameValue($EVENT) }\
  stat/gosund-sp111-01/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_02F335 room Tasmota
attr MQTT2_DVES_02F335 setList off:noArg    cmnd/gosund-sp111-01/POWER1 0\
  on:noArg     cmnd/gosund-sp111-01/POWER1 1\
  toggle:noArg cmnd/gosund-sp111-01/POWER1 2
attr MQTT2_DVES_02F335 setStateList on off toggle
attr MQTT2_DVES_02F335 sortby 3
attr MQTT2_DVES_02F335 stateFormat {my $state = lc ReadingsVal($name, "state", "off");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
ReadingsVal($name,"ENERGY_Power",-1), \
ReadingsVal($name,"ENERGY_Today",-1)\
)\
}
attr MQTT2_DVES_02F335 userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_02F335 webCmd toggle

define rg_verbraucher readingsGroup <Verbraucher>,<Status>,<Verbrauch>\
TYPE=MQTT2_DEVICE:POWER1,ENERGY_Power\
rg_verbraucher:$sum(:2)@Summe
setuuid rg_verbraucher 5dc6ca84-f33f-d8e9-d86c-6c8078ed793995f7
attr rg_verbraucher alias Verbraucher
attr rg_verbraucher group Strom
attr rg_verbraucher noheading 1
attr rg_verbraucher room Dashboard
attr rg_verbraucher sortDevices 1
attr rg_verbraucher style style="border:0px;;background:none;;box-shadow:none"
attr rg_verbraucher valueFormat {ENERGY_Power => "%.0fW", Summe => "%.0fW"}
attr rg_verbraucher valueIcon {\
	'POWER1.on' => 'ios-on-green',\
	'POWER1.off' => 'ios-off@red'\
}
attr rg_verbraucher valueStyle style="text-align:right"

define MQTT2_DVES_A4CAD6 MQTT2_DEVICE DVES_A4CAD6
setuuid MQTT2_DVES_A4CAD6 5dc9dc0a-f33f-d8e9-4e65-7d31a3d77782b6cb
attr MQTT2_DVES_A4CAD6 IODev myBroker
attr MQTT2_DVES_A4CAD6 alias Waschmaschine
attr MQTT2_DVES_A4CAD6 autocreate 1
attr MQTT2_DVES_A4CAD6 event-on-change-reading .*
attr MQTT2_DVES_A4CAD6 readingList tele/gosund-sp111-03/LWT:.* LWT\
  tele/gosund-sp111-03/STATE:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-03/SENSOR:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-03/INFO.:.* { json2nameValue($EVENT) }\
  stat/gosund-sp111-03/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_A4CAD6 room Tasmota
attr MQTT2_DVES_A4CAD6 setList off:noArg    cmnd/gosund-sp111-03/POWER1 0\
  on:noArg     cmnd/gosund-sp111-03/POWER1 1\
  toggle:noArg cmnd/gosund-sp111-03/POWER1 2
attr MQTT2_DVES_A4CAD6 setStateList on off toggle
attr MQTT2_DVES_A4CAD6 sortby 6
attr MQTT2_DVES_A4CAD6 stateFormat {\
	my $state = lc ReadingsVal($name, "state", "off");;\
	my $online = lc ReadingsVal($name, "LWT", "Offline");;\
	my $devStateIcon = 'ios-on-green.png';;\
	if ($state eq "off")\
	{\
		$devStateIcon = 'ios-off.png';;\
	}\
	if ($online eq "Offline")\
	{\
		$devStateIcon = 'ios-NACKK.png';;\
	}\
	"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
	"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
	ReadingsVal($name,"ENERGY_Power",-1), \
	ReadingsVal($name,"ENERGY_Today",-1)\
	)\
}
attr MQTT2_DVES_A4CAD6 userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_A4CAD6 webCmd toggle

define MQTT2_DVES_350EBD MQTT2_DEVICE DVES_350EBD
setuuid MQTT2_DVES_350EBD 5dc9dc0a-f33f-d8e9-3f9c-ee834ef0f2e9b1eb
attr MQTT2_DVES_350EBD IODev myBroker
attr MQTT2_DVES_350EBD alias Trockner
attr MQTT2_DVES_350EBD autocreate 1
attr MQTT2_DVES_350EBD event-on-change-reading .*
attr MQTT2_DVES_350EBD readingList tele/gosund-sp111-04/LWT:.* LWT\
  tele/gosund-sp111-04/STATE:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-04/SENSOR:.* { json2nameValue($EVENT) }\
  tele/gosund-sp111-04/INFO.:.* { json2nameValue($EVENT) }\
  stat/gosund-sp111-04/RESULT:.* { json2nameValue($EVENT) }
attr MQTT2_DVES_350EBD room Tasmota
attr MQTT2_DVES_350EBD setList off:noArg    cmnd/gosund-sp111-04/POWER1 0\
on:noArg     cmnd/gosund-sp111-04/POWER1 1\
toggle:noArg cmnd/gosund-sp111-04/POWER1 2
attr MQTT2_DVES_350EBD setStateList on off toggle
attr MQTT2_DVES_350EBD sortby 7
attr MQTT2_DVES_350EBD stateFormat {my $state = lc ReadingsVal($name, "state", "on");;\
my $devStateIcon = 'ios-on-green.png';;\
if ($state eq "off")\
{\
$devStateIcon = 'ios-off.png';;\
}\
"<div><img src='/fhem/images/default/" . $devStateIcon . "'>" . sprintf(\
"&nbsp;;&nbsp;;Aktuell: %.0f W / Tag: %.3f kW/h",\
ReadingsVal($name,"ENERGY_Power",-1), \
ReadingsVal($name,"ENERGY_Today",-1)\
)\
}
attr MQTT2_DVES_350EBD userReadings state:POWER1:.* { lc(ReadingsVal($name,"POWER1","")) }
attr MQTT2_DVES_350EBD webCmd toggle

define myPlot_Synology SVG logdb:myPlot_Synology:HISTORY
setuuid myPlot_Synology 5dcdd830-f33f-d8e9-c608-fb7737e10b9746e2
attr myPlot_Synology room Plots
define wdt_Zirkulation WeekdayTimer MQTT2_DVES_0371A9 12345|06:15|on 67|08:00|on 1234567|20:00|off
setuuid wdt_Zirkulation 5e1325fa-f33f-d8e9-b4c9-28e607290a3feade
attr wdt_Zirkulation alias Zeitschaltung Zirkulationspumpe
attr wdt_Zirkulation commandTemplate set $NAME  $EVENT
attr wdt_Zirkulation devStateIcon on:general_an@green off:general_aus@red
attr wdt_Zirkulation room Tasmota
